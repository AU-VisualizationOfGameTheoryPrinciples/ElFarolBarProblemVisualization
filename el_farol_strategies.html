<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The El Farol Bar Problem!</title>

    <link rel="stylesheet" href="stylesheet.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Beth+Ellen&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="favicon.ico" sizes="64x64">
</head>

<body>
    <img class="logo" src="./img/bar_icon.png">
    <h1 class="title">üç∫ The El Farol Bar Problem! üçπ</h1>
    <button id="help" class="help"><img src="img/q_mark_icon.png" alt="?" style="width: 1rem; height: auto;"></button>
    <div id="intro" class="introduction site_introduction" style="display: none;">
        <h3>El Farol Bar Problem - Agent Visualization</h3>
        <p>This application simulates the El Farol Bar Problem with agents using a set of strategies based on the past
            bar attendances in their memory.</p>
        <p>A strategy is formed simular to the NetLogo model with random weights from -1 to 1 for the past attendances.
            By weighting the attendances the agent makes a prediction on the current bar attendance. If their prediction
            is under the bar capacity (overcrowding-threshold; by default 60), the agent decides to go to the bar, otherwise they
            stay at home. When all agents decided, everyone checks the errors of their strategies to the actual attendance
            and use the strategy with the lowest error for the next prediction.</p>
        <div>
            <img src="img/bar_day_prediction_desc.png" alt="bar day prediction description image">
            <img src="img/bar_day_attendance_desc.png" alt="bar day attendance description image">
            <img src="img/all_day_predictions_desc.png" alt="all day predictions description image">
        </div>
    </div>
    <div id="main">
        <form id="form" method="get" action="">
            <div class="form">
                <div class="settings">
                    <label for="strategies_count">Number of Strategies:</label>
                    <input type="number" id="strategies_count" name="strategies_count">
                    <label for="memory_size">Memory Size:</label>
                    <input type="number" id="memory_size" name="memory_size">
                    <label for="days">Following Days (Iterations):</label>
                    <input type="number" id="days" name="days">
                    <label for="has_player_agent">Own predictions?:</label>
                    <input type="checkbox" id="has_player_agent" name="has_player_agent" value="true">
                </div>
            </div>
            <input class="submit-button" type="submit" value="Submit">
        </form>
        <div id="prediction_tab" style="display: none;">
            <h2>Your predictions</h2>
            <p>Day <short id="day_nr">X</short>
            </p>
            <div>
                <label for="prediction">Prediction:</label>
                <input type="number" id="prediction" name="prediction">
                <label for="mem_attendances">Attendances in Memory:</label>
                <input type="text" id="mem_attendances" name="mem_attendances" disabled>
            </div>
            <button id="prediction_button" class="submit-button">Predict</button>
            <div class="player_predictions">
                <label for="player_predictions">Predictions:</label>
                <input type="text" id="player_predictions" name="player_predictions" disabled>
            </div>
        </div>
        <div id="graphs">
            <h2>Attendances at the bar for all days</h2>
            <div class="days_summary">
                <div id="days_summary_attendances" style="padding: 5%;"></div>
                <canvas id="days_summary_graph" style="width: fit-content;"></canvas>
                <div id="days_summary" style="padding: 5%;">
                    <p id="days_summary_text"></p>
                </div>
            </div>
            <h2>People at the bar per day</h2>
            <div id="days_list">
                <!-- <canvas id="day" style="width: fit-content;" width="500" height="500"></canvas> -->
                <!-- <canvas id="bar_home" style="width: fit-content;" width="500" height="500"></canvas> -->
            </div>
            <h2>Predictions per agent for all days</h2>
            <div class="days_summary">
                <canvas id="attendance_graph" width="500" height="500"></canvas>
            </div>
        </div>
    </div>
    </div>
</body>

</html>
<script type="module" src="./Farol_Agent.js"></script>